<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script src="js/underscore.js"></script>
    <script src="js/sparrow-virtual-dom.js"></script>
    <script>
        var node = sparrow.node;
        var Container = sparrow.component({
            componentName: 'Container',
            handleClick: function () {
                var newItem=this.refs.userInput.value;
                this.setState({name:'se!!!'})
            },
            render: function (p, s) {
                console.log(s);
                return node('div', null, [
                    node('div', null, [
                        node('input', {ref:'userInput'}), node('button', {onClick: this.handleClick}, 'OK')
                    ]),
                    node(ToDoList, null)
                ])
            }
        });

        var ToDoList = sparrow.component({
            componentName: 'ToDoList',
            defaultProp: function(){
                return {id: 'to-do-list'}
            },
            initialState: function (){
                return {items: [{name: 'eat', date: 'morning'}, {name: 'sex', date: 'night'},{name:'sex'}]}
            },
            render: function (p, s) {
                var Items;
                console.log(p);
                Items = s.items.map(function (item) {
                    return sparrow.node(ToDoItem, {item: item})
                });
                return sparrow.node('ul', {id: p.id}, Items)
            }
        });

        var ToDoItem = sparrow.component({
            componentName: 'ToDoItem',
            render: function (p, s) {
                return sparrow.node('li', null, p.item.name)
            }
        });

    </script>
</head>
<body>
<h3>to-do-list</h3>

<div id="c"></div>
<button onclick="update()">update</button>
</body>
<script>
    function update() {
        ToDoList.setState({items: [{name: 'swim', date: 'night'}]});
    }
    var container = Container.paint();
    var c = document.getElementById('c');
    sparrow.mount(container, c);

</script>
</html>